---
import Layout from "@/layouts/Layout.astro";
import LoginForm from "@/components/LoginForm.astro";
import hasProfile from "@/utils/profile";

const cookie: string = `${Astro.cookies.get(import.meta.env.COOKIE_NAME || "_Security_Login_")?.value}`;
const d = hasProfile(cookie, import.meta.env.COOKIE_SECRET || "secret");

if (d.success === true) {
  return Astro.redirect("/");
}
---

<Layout page="Login">
  <div class="login">
    <h1>Login</h1>
    <LoginForm />
    <div class="quote">
      <center>
        <span>Email: user@example.com</span>
        <span>Password: 1234</span>
        <span
          >by <a href="https://zastinian.com">Zastinian</a>, <a href="https://github.com/Zastinian/Astro-Login">Github Code</a>, <a
            href="https://twitter.com/Zastinian">Twitter</a
          >.</span
        >
      </center>
    </div>
  </div>
</Layout>
